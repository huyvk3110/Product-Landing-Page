<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Product Landing Page</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
</head>

<body>
    <header id="header">
        <div class="logo">
            <img id="header-img" src="https://s3.amazonaws.com/freecodecamp/original_trombones.png" alt="logo">
        </div>
        <nav id="nav-bar">
            <ul>
                <li><a href="#feature" class="nav-link">Feature</a></li>
                <li><a href="#how-it-work" class="nav-link">How it work</a></li>
                <li><a href="#pricing" class="nav-link">Pricing</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="title">
            <h1>Handcrafted, home-made masterpieces</h1>
            <form action="" id="form">
                <input type="text" name="email" id="email" placeholder="Enter your email adress">
                <input type="button" id="submit" class="button" value="Get started">
            </form>
        </section>
        <section id="feature">
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fa fa-3x fa-fire"></i>
                </div>
                <div class="feature-des">
                    <h2>Premium Materials</h2>
                    <p>Our trombones use the shiniest brass which is sourced locally. This will increase the longevity
                        of your purchase.</p>
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fa fa-3x fa-truck"></i>
                </div>
                <div class="feature-des">
                    <h2>Fast Shipping</h2>
                    <p>We make sure you recieve your trombone as soon as we have finished making it. We also provide
                        free returns if you are not satisfied.</p>
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fa fa-3x fa-battery-full"></i>
                </div>
                <div class="feature-des">
                    <h2>Quality Assurance</h2>
                    <p>For every purchase you make, we will ensure there are no damages or faults and we will check and
                        test the pitch of your instrument.</p>
                </div>
            </div>
        </section>
        <section id="how-it-work">
            <iframe src="https://www.youtube-nocookie.com/embed/y8Yv4pnO7qc?rel=0&controls=0&showinfo=0" width="600px"
                height="315px" id="video" frameborder="0" frameborder="0" allowfullscreen></iframe>
        </section>
        <section id="pricing">
            <div class="pricing-item">
                <div class="pricing-title">TENOR TROMBONE</div>
                <h2>$600</h2>
                <ul>
                    <li>Lorem ipsum.</li>
                    <li>Lorem ipsum.</li>
                    <li>Lorem ipsum dolor.</li>
                    <li>Lorem ipsum.</li>
                </ul>
                <button class="button">SELECT</button>
            </div>
            <div class="pricing-item">
                <div class="pricing-title">BASS TROMBONE</div>
                <h2>$900</h2>
                <ul>
                    <li>Lorem ipsum.</li>
                    <li>Lorem ipsum.</li>
                    <li>Lorem ipsum dolor.</li>
                    <li>Lorem ipsum.</li>
                </ul>
                <button class="button">SELECT</button>
            </div>
            <div class="pricing-item">
                <div class="pricing-title">VALVE TROMBONE</div>
                <h2>$1200</h2>
                <ul>
                    <li>Lorem ipsum.</li>
                    <li>Lorem ipsum.</li>
                    <li>Lorem ipsum dolor.</li>
                    <li>Lorem ipsum.</li>
                </ul>
                <button class="button">SELECT</button>
            </div>
        </section>
    </main>
    <footer>
        <ul>
            <li><a href="#">Privacy</a></li>
            <li><a href="#">Terms</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
        <div>Copyright 2016, Original Trombones</div>
    </footer>
    <div id="bubble">
        This is bubble
    </div>
</body>
<script>
    //Variable
    let elementEmail = document.getElementById('email');
    let elementSubmit = document.getElementById('submit');
    let elementBubble = document.getElementById('bubble');

    //Handle
    window.addEventListener('scroll', () => {
        if (isBubbleShow()) hiddenBubble()
    })

    window.addEventListener('keydown', () => {
        if (isBubbleShow()) hiddenBubble()
    })

    elementSubmit.addEventListener('click',submit)

    function submit() {
        //Variable
        let error = undefined;
        //Check
        //-Email
        const emailValue = elementEmail.value;
        let regex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
        if (!error && !emailValue) error = {
            href: '#title',
            element: elementEmail,
            message: 'Please fill out this field'
        }
        if (!error && !regex.test(String(emailValue).toLowerCase())) error = {
            href: '#title',
            element: elementEmail,
            message: 'Incorect email format'
        }

        if (error) {
            location.href = error.href;
            setTimeout(() => { showBubble(error.element, error.message) }, 200);
        }
    }

    function showBubble(element, message) {
        elementBubble.style.display = `inline-block`
        elementBubble.style.top = `${element.getBoundingClientRect().top + element.offsetHeight}px`
        elementBubble.style.left = `${element.getBoundingClientRect().left}px`
        elementBubble.innerText = message;
    }

    function hiddenBubble() {
        elementBubble.style.display = 'none'
    }

    function isBubbleShow() {
        return elementBubble.style.display != 'none';
    }
</script>

</html>